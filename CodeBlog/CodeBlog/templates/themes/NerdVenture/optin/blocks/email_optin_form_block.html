{% load wagtailcore_tags %}
{% load static %}

{% block load_last %}
<svg aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<symbol id="icon-send" viewBox="0 0 20 20">
<title>send</title>
<path d="M0 0l20 10-20 10v-20zM0 8v4l10-2-10-2z"></path>
</symbol>
</defs>
</svg>
{% endblock %}

<div class='mx-auto' style="max-width: 500px;">

    <form id="optinform" name="optinform" method="post">
        <input type="hidden" id="optinName" name="optinName" value="{{ optinName }}">
        <input type="hidden" id="apiURL" name="apiURL" value="{{ request.scheme }}://{{ request.get_host }}{% url 'newsletter-createSubscriberView' %}">

        <div class="input-group mb-2 mr-sm-2">
            <input class="form-control sketch-border nd-input" type="email" name="emailoptin"  
                placeholder="Email" aria-label="Optin"  required>

            <div class="input-group mx-auto trans-ease grow">
                <button type="submit" value="Subscribe" 
                    name="submit" class="optin-cta-btn  input-group-icon btn  bg-alt w-100 mt-2 sketch-border">
                     <div class="trans-ease grow mx-auto my-auto justify-content-center text-center">
                        <span class="">{{ value.cta_text }}</span>
                        {% comment %} <svg class="icon icon-send" style="color: #292;"><use xlink:href="#icon-send"></use></svg> {% endcomment %}
                        <span id="btn-loader" class="d-none mx-1 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    </div> 
                </button>

                    {% if value.cta_action_download %}
                        <input type="hidden" id="optin-action-download" value="{{ value.cta_action_download.url }}">
                    {% endif %}
                    {% if value.cta_action_pageload %}
                        <input type="hidden" id="optin-action-pageload" value="{{ value.cta_action_pageload.url }}">
                    {% endif %}
            </div>

            {% comment %} <div class="input-group-append">
                <button type="submit" value="Subscribe" 
                    name="submit" class="input-group-icon btn btn-outline-success sketch-border">
                     <div class="trans-ease grow mx-auto my-auto justify-content-center text-center">
                        <span class="d-none d-xl-inline">Subscribe</span>
                        <svg class="d-xl-none icon icon-send"><use xlink:href="#icon-send"></use></svg>
                        <span id="btn-loader" class="d-none mx-1 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    </div> 
                </button>
            </div> {% endcomment %}
        
        </div>
    </form>
    
</div>

